/*
 * This Groovy source file was generated by the Gradle 'init' task.
 */
package dsldemo

import static dsldemo.PlayerService.carregaPlaylist
import static dsldemo.dsl.ArtistDsl.artist
import static dsldemo.enums.Genre.*

class App {

    static void main(String[] args) {
        List<String> argsList = args.toList()
        setArtists()
        if (argsList.size() < 1) {
            throw new IllegalArgumentException("Playlist nÃ£o informada!")
        }
        String playlistName = argsList[0]
        String root = argsList[1] ?: '.'
        PlayerService service = carregaPlaylist(playlistName, root)
        service.analyzeGenres()
        service.play()
    }

    static void setArtists() {
        artist(
                name: 'Pages',
                genre: AOR
        )
        artist(
                name: 'Natalie Imbruglia',
                genre: POP
        )
        artist(
                name: 'The Weeknd',
                genre: RNB
        )
    }

}
